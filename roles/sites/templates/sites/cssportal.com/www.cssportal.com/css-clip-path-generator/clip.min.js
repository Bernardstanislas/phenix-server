shape_array={polygon:[{name:"Triangle",coords:[[50,0],[0,100],[100,100]]},{name:"Trapezoid",coords:[[20,0],[80,0],[100,100],[0,100]]},{name:"Parallelogram",coords:[[25,0],[100,0],[75,100],[0,100]]},{name:"Rhombus",coords:[[50,0],[100,50],[50,100],[0,50]]},{name:"Pentagon",coords:[[50,0],[100,38],[82,100],[18,100],[0,38]]},{name:"Hexagon",coords:[[50,0],[100,25],[100,75],[50,100],[0,75],[0,25]]},{name:"Heptagon",coords:[[50,0],[90,20],[100,60],[75,100],[25,100],[0,60],[10,20]]},{name:"Octagon",coords:[[30,0],[70,0],[100,30],[100,70],[70,100],[30,100],[0,70],[0,30]]},{name:"Nonagon",coords:[[50,0],[83,12],[100,43],[94,78],[68,100],[32,100],[6,78],[0,43],[17,12]]},{name:"Decagon",coords:[[50,0],[80,10],[100,35],[100,70],[80,90],[50,100],[20,90],[0,70],[0,35],[20,10]]},{name:"Bevel",coords:[[20,0],[80,0],[100,20],[100,80],[80,100],[20,100],[0,80],[0,20]]},{name:"Rabbet",coords:[[0,15],[15,15],[15,0],[85,0],[85,15],[100,15],[100,85],[85,85],[85,100],[15,100],[15,85],[0,85]]},{name:"Left arrow",coords:[[40,0],[40,20],[100,20],[100,80],[40,80],[40,100],[0,50]]},{name:"Right arrow",coords:[[0,20],[60,20],[60,0],[100,50],[60,100],[60,80],[0,80]]},{name:"Left Point",coords:[[25,0],[100,1],[100,100],[25,100],[0,50]]},{name:"Right Point",coords:[[0,0],[75,0],[100,50],[75,100],[0,100]]},{name:"Left Chevron",coords:[[100,0],[75,50],[100,100],[25,100],[0,50],[25,0]]},{name:"Right Chevron",coords:[[75,0],[100,50],[75,100],[0,100],[25,50],[0,0]]},{name:"Star",coords:[[50,0],[61,35],[98,35],[68,57],[79,91],[50,70],[21,91],[32,57],[2,35],[39,35]]},{name:"Cross",coords:[[10,25],[35,25],[35,0],[65,0],[65,25],[90,25],[90,50],[65,50],[65,100],[35,100],[35,50],[10,50]]},{name:"Message",coords:[[0,0],[100,0],[100,75],[75,75],[75,100],[50,75],[0,75]]},{name:"Close",coords:[[20,0],[0,20],[30,50],[0,80],[20,100],[50,70],[80,100],[100,80],[70,50],[100,20],[80,0],[50,30]]},{name:"Frame",coords:[[0,0],[0,100],[25,100],[25,25],[75,25],[75,75],[25,75],[25,100],[100,100],[100,0]]}],circle:[{name:"Circle",radius:50,position:[50,50],coords:[[100,50],[50,50]],disabled:!0}],ellipse:[{name:"Ellipse",radius:[25,40],position:[50,50],coords:[[50,50],[0,50],[0,50]],disabled:!1}],inset:[{name:"Inset",coords:[5,20,15,10],disabled:!1}],custom:[{name:"Custom Polygon",coords:[[10,75],[10,25],[35,0],[100,10],[90,30],[50,30],[40,40],[40,60],[50,70],[90,70],[100,90],[35,100]],disabled:!1}]},$html=$("html"),$body=$("body"),$box=$("#box"),$side=$(".side"),$clipboard=$(".clipboard"),$handles=$(".handles"),$shapes=$(".shapes ul"),$functions=$(".functions"),$clip_path=$(".clip-path"),$unprefixed=$(".unprefixed"),$demo=$(".demo"),$inset_round=$("#inset_round"),$demo_width=$("#demo_width"),$demo_height=$("#demo_height");var start=shape_array.polygon[0];function setCustomBackground(a){var t=".shadowboard, .clipboard { background-image: url("+a+"); }";$("#custom_background").html(t),scrollTop()}function initDragDrop(){(function(){$("#upload_image").on("change",function(a){return readURL(this)}),this.readURL=function(a){var t;if(a.files&&a.files[0])return(t=new FileReader).onload=function(a){$(".image_to_upload").attr("src",a.target.result);var t=".shadowboard, .clipboard { background-image: url("+a.target.result+"); }";$("#custom_background").html(t)},t.readAsDataURL(a.files[0])}}).call(this)}function scrollTop(){$(window).width()<mobile_px_breakpoint&&$(window).scrollTop(0)}function init(){type=start_type,initDragDrop(),$.each(shape_array.polygon,function(a,t){paths="",$.each(t.coords,function(a,i){type="polygon";var o=i[0]+"%",n=i[1]+"%";i="";a==t.coords.length-1?(paths+=o+" "+n,appendFigure("polygon("+paths+")",t)):paths+=o+" "+n+", "})}),$.each(shape_array.inset,function(a,t){type="inset",appendFigure("inset("+(t.coords[0]+"%")+" "+(t.coords[1]+"%")+" "+(t.coords[2]+"%")+" "+(t.coords[3]+"%")+")",t)}),$.each(shape_array.custom,function(a,t){paths="",$.each(t.coords,function(a,i){type="custom";var o=i[0]+"%",n=i[1]+"%";i="";a==t.coords.length-1?(paths+=o+" "+n,appendFigure("polygon("+paths+")",t)):paths+=o+" "+n+", "})}),$.each(shape_array.circle,function(a,t){type="circle",appendFigure("circle("+(t.radius+"%")+" at "+(t.position[0]+"%")+" "+(t.position[1]+"%")+")",t)}),$.each(shape_array.ellipse,function(a,t){type="ellipse",appendFigure("ellipse("+(t.radius[0]+"%")+" "+(t.radius[1]+"%")+" at "+(t.position[0]+"%")+" "+(t.position[1]+"%")+")",t)}),type=start_type,setupDemo(start_coords)}function appendFigure(a,t){var i="",o="clip-path: "+a;if(1==t.disabled)var n='class="disabled" ';else n="";if($(".webkit.block").hasClass("show"))i="-webkit-clip-path: "+a+";";if("polygon"==type)var e='<figure class="gallery-cell" '+n+'data-name="'+t.name+'" data-type="polygon" data-coords="'+t.coords.join(" ")+'"><div style="'+i+"  "+o+'" class="shape '+t.name+'"></div><figcaption>'+t.name+"</figcaption></figure>";if("custom"==type)e='<figure class="gallery-cell" '+n+'data-name="'+t.name+'" data-type="custom" data-coords="'+t.coords.join(" ")+'"><div style="'+i+"  "+o+'" class="shape '+t.name+'"></div><figcaption>'+t.name+"</figcaption></figure>";if("inset"==type)e='<figure class="gallery-cell" '+n+'data-name="'+t.name+'" data-type="inset" data-coords="'+t.coords.join(" ")+'"><div style="'+i+"  "+o+'" class="shape '+t.name+'"></div><figcaption>'+t.name+"</figcaption></figure>";if("circle"==type)e='<figure class="gallery-cell" '+n+'data-name="Circle" data-type="circle"><div style="'+i+"  "+o+'" class="shape '+t.name+'"></div><figcaption>'+t.name+"</figcaption></figure>";if("ellipse"==type)e='<figure class="gallery-cell" '+n+'data-name="Ellipse" data-type="ellipse"><div style="'+i+"  "+o+'" class="shape '+t.name+'"></div><figcaption>'+t.name+"</figcaption></figure>";$shapes.append(e),$('[data-name="'+start.name+'"]').addClass("on"),$("figure:not(.disabled)").unbind().click(function(){if($("figure").removeClass("on"),$(this).addClass("on"),type=$(this).attr("data-type"),"inset"==type){var a=shape_array.inset[0];start_coords=a.coords,setupDemo(a.coords)}("custom"==type&&setupDemo(),"circle"==type)&&setupDemo((a=shape_array.circle[0]).coords);"ellipse"==type&&setupDemo((a=shape_array.ellipse[0]).coords);if("polygon"==type){new_shape=[];var t=$(this).attr("data-coords").split(" ");t=$.each(t,function(a,i){i=i.split(",");new_shape.push(i),a==t.length-1&&(start_coords=new_shape,setupDemo(start_coords))})}})}function setupDemo(a){if(clearDemo(),"custom"==type){$html.addClass("customizing start-customizing customizing-no-poly"),$handles.empty(),$functions.html('polygon(<span class="function"></span>)'),$(".finish").click(function(){finishCustomizing(),readyDrag()}),clipIt();var t=0;$demo.click(function(a){t++;var i=$(this).offset(),o=a.pageX-i.left-10,n=a.pageY-i.top-10;if(o<0)o=0;if(o>width)o=width;if(n<0)n=0;if(n>height)n=height;var e=Math.round(o/width*100)+"%",s=Math.round(n/height*100)+"%";$handles.append('<div class="handle" data-handle="'+t+'" style="top: '+n+"px; left: "+o+'px;"></div>');var p=$(".function",p);if(t>1?p.append(', <span class="point" data-point="'+t+'">'+e+" "+s+"</span>"):(p.append('<span class="point" data-point="'+t+'">'+e+" "+s+"</span>"),$html.removeClass("start-customizing")),t>2){$(".finish").attr("data-shape",["triangle","quadrilateral","pentagon","hexagon","heptagon","octagon","nonagon","decagon","hendecagon","dodecagon","tridecagon","tetradecagon","pentadecagon","hexadecagon","heptadecagon","octadecagon","nonadecagon","icosagon","icosagon","icosikaihenagon","icosikaidigon","icosikaitrigon","icosikaitetragon","icosikaipentagon","icosikaihexagon","icosikaiheptagon","icosikaioctagon","icosikaienneagon","triacontagon","triacontakaihenagon","triacontakaidigon","triacontakaitrigon","triacontakaitetragon","triacontakaipentagon","triacontakaihexagon","triacontakaiheptagon","triacontakaioctagon","triacontakaienneagon","tetracontagon","tetracontakaihenagon","tetracontakaidigon","tetracontakaitrigon","tetracontakaitetragon","tetracontakaipentagon","tetracontakaihexagon","tetracontakaiheptagon","tetracontakaioctagon","tetracontakaienneagon","pentacontagon","pentacontakaihenagon","pentacontakaidigon","pentacontakaitrigon","pentacontakaitetragon","pentacontakaipentagon","pentacontakaihexagon","pentacontakaiheptagon","pentacontakaioctagon","pentacontakaienneagon","hexacontagon","hexacontakaihenagon","hexacontakaidigon","hexacontakaitrigon","hexacontakaitetragon","hexacontakaipentagon","hexacontakaihexagon","hexacontakaiheptagon","hexacontakaioctagon","hexacontakaienneagon","heptacontagon","heptacontakaihenagon","heptacontakaidigon","heptacontakaitrigon","heptacontakaitetragon","heptacontakaipentagon","heptacontakaihexagon","heptacontakaiheptagon","heptacontakaioctagon","heptacontakaienneagon","octacontagon","octacontakaihenagon","octacontakaidigon","octacontakaitrigon","octacontakaitetragon","octacontakaipentagon","octacontakaihexagon","octacontakaiheptagon","octacontakaioctagon","octacontakaienneagon","enneacontagon","enneacontakaihenagon","enneacontakaidigon","enneacontakaitrigon","enneacontakaitetragon","enneacontakaipentagon","enneacontakaihexagon","enneacontakaiheptagon","enneacontakaioctagon","enneacontakaienneagon","hectogon"][t-3]),$html.removeClass("customizing-no-poly"),clipIt(),$('[data-handle="1"]').click(function(){finishCustomizing(),readyDrag()})}})}else finishCustomizing(),$.each(a,function(t,i){var o=i[0],n=i[1],e=o+"%",s=n+"%",p=Math.round(o/100*width),d=Math.round(n/100*height);if("circle"==type){var r=(u=shape_array.circle[0]).radius;if(width!==height)var c=width*getRadiusModifier();else c=width;0==t&&$handles.append('<div class="radius handle" data-handle="'+t+'" style="top: '+d+"px; left: "+c+'px;"></div>'),1==t&&$handles.append('<div class="position handle" data-handle="'+t+'" style="top: '+d+"px; left: "+p+'px;"></div>');r=r+"%";var l=(l=u.position[0])+"%",h=(h=u.position[1])+"%";if(t==a.length-1){var g="circle("+(r='<span class="point radius" data-point="0">'+r+"</span>")+" at "+(x='<span class="point position" data-point="1">'+l+" "+h+"</span>")+")";$functions.append(g),clipIt(),readyDrag()}}if("ellipse"==type){var u,f=(x=(u=shape_array.ellipse[0]).position)[0]/100*width,$=x[1]/100*height,m=(c=(1-(r=u.radius)[0]/100)*width,r[1]/2/100*height/2);0==t&&$handles.append('<div class="radius_x handle" data-handle="'+t+'" style="top: '+d+"px; left: "+c+'px;"></div>'),1==t&&$handles.append('<div class="radius_y handle" data-handle="'+t+'" style="top: '+m+"px; left: "+f+'px;"></div>'),2==t&&$handles.append('<div class="position handle" data-handle="'+t+'" style="top: '+$+"px; left: "+f+'px;"></div>');var y=r[0]+"%",_=r[1]+"%";l=u.position[0]+"%",h=u.position[1]+"%";if(t==a.length-1){var x;g="ellipse("+(y='<span class="point radius" data-point="0">'+y+"</span>")+" "+(_='<span class="point radius" data-point="1">'+_+"</span>")+" at "+(x='<span class="point position" data-point="2">'+l+" "+h+"</span>")+")";$functions.append(g),clipIt(),readyDrag()}}if("polygon"==type&&($handles.append('<div class="handle" data-handle="'+t+'" style="top: '+d+"px; left: "+p+'px;"></div>'),t==a.length-1?($functions.append('<span class="point" data-point="'+t+'">'+e+" "+s+"</span>"),$functions.prepend("polygon(").append(")"),clipIt(),readyDrag()):$functions.append('<span class="point" data-point="'+t+'">'+e+" "+s+"</span>, ")),"inset"==type&&($html.addClass("insetting"),t==a.length-1)){$handles.append('<div class="handle top horizontal bar" data-handle="0"></div>'),$handles.append('<div class="handle right vertical bar" data-handle="1"></div>'),$handles.append('<div class="handle bottom horizontal bar" data-handle="2"></div>'),$handles.append('<div class="handle left vertical bar" data-handle="3"></div>'),$unprefixed.attr("data-coords",a[0]+" "+a[1]+" "+a[2]+" "+a[3]),setHandleBars();g="inset("+('<span class="point" data-point="0">'+a[0]+"%</span> ")+('<span class="point" data-point="1">'+a[1]+"%</span> ")+('<span class="point" data-point="2">'+a[2]+"%</span> ")+('<span class="point" data-point="3">'+a[3]+"%</span>")+'<span class="round-value"></span>)';$functions.append(g),clipIt(),readyDrag()}})}function finishCustomizing(){$html.removeClass("customizing start-customizing customizing-no-poly"),$(".finish").removeAttr("data-shape"),$demo.unbind("click")}function getRadiusModifier(){return(width/2+Math.sqrt(Math.pow(width,2)+Math.pow(height,2))/Math.sqrt(2)/2)/width}function setHandleBars(a){var t=$unprefixed.attr("data-coords").split(" "),i=t[0],o=t[1],n=t[2],e=t[3],s=Math.round(i/100*height),p=Math.round((1-o/100)*width),d=Math.round((1-n/100)*height),r=Math.round(e/100*width),c=(p+r)/2,l=(s+d)/2;"top"!==a&&$(".top.bar").css("top",s).css("left",c),"right"!==a&&$(".right.bar").css("top",l).css("left",p),"bottom"!==a&&$(".bottom.bar").css("top",d).css("left",c),"left"!==a&&$(".left.bar").css("top",l).css("left",r)}function readyDrag(){var a=document.querySelector("#box").querySelectorAll(".handle");$(".functions");if("polygon"!=type&&"custom"!=type||($(".handle").html('<div class="delete-point"></div>'),$(".handle").mousedown(function(){if($(".handle").length>3){var a=$(this),t=$(this).attr("data-handle");$(".handle").removeClass("show-delete"),a.addClass("show-delete"),$(".delete-point",a).mousedown(function(){a.remove(),$('[data-point="'+t+'"]').remove();var i=$(".functions").html().replace("(, ","(").replace(", , ",", ").replace(", )",")");$(".functions").html(i),clipIt()}),a.mouseup(function(){setTimeout(function(){a.removeClass("show-delete")},3e3)})}})),"circle"==type||"polygon"==type||"custom"==type)for(var t=0,i=a.length;t<i;t++){var o=a[t];new Draggabilly(o,{containment:!0,grid:grid}).on("dragStart",function(a,i,o){if(t=a.element.dataset.handle,$point=$('[data-point="'+t+'"]'),$point.addClass("changing"),"circle"==type){special=a.element.classList[0],modifier=getRadiusModifier(),$position=$(".position.handle"),position_pos_x=$position.position().left,position_pos_y=$position.position().top,$radius=$(".radius.handle"),radius_pos_x=$radius.position().left,radius_pos_y=$radius.position().top;Math.max(width,height),Math.min(width,height);Math.max(width,height),startRadius=getRadius(radius_pos_x,position_pos_x,radius_pos_y,position_pos_y)/100}}).on("dragMove",function(a,t,i){var o=a.position.x,n=a.position.y;if("circle"==type){if("position"==special){var e=width/2-o,s=height/2-n,p=Math.max(width,height),d=Math.atan2(s,e);if((r=Math.cos(d)*startRadius*p+o)<0)var r=0;if(r>width)r=width;if((c=Math.sin(d)*startRadius*p+n)<0)var c=0;if(c>height)c=height;var l="left:"+r+"px; top:"+c+"px";$radius.attr("style",l),setPoint(o,n)}if("radius"==special){var h=(h=getRadius(o,position_pos_x,n,position_pos_y))+"%";$point.text(h)}}"polygon"!=type&&"custom"!=type||setPoint(o,n),clipIt()}).on("dragEnd",function(a){$(".point").removeClass("changing")})}if("ellipse"==type)for(t=0,i=a.length;t<i;t++){o=a[t];if("radius_x"==(e=o.classList[0]))var n="x";if("radius_y"==e)n="y";if("position"==e)n="";new Draggabilly(o,{containment:!0,grid:grid,axis:n}).on("dragStart",function(a,i,o){if(t=a.element.dataset.handle,e=a.element.classList[0],$point=$('[data-point="'+t+'"]'),$point.addClass("changing"),$position=$(".position"),$radius_x=$(".radius_x"),$radius_y=$(".radius_y"),start_x_px=a.position.x,start_y_px=a.position.y,start_pos_x=$position.position().left,start_pos_x_pct=100*start_pos_x/width,start_pos_y=$position.position().top,start_pos_y_pct=100*start_pos_y/height,"position"==e){start_radius_x_px=[$radius_x.position().left,$radius_x.position().top],start_radius_y_px=[$radius_y.position().left,$radius_y.position().top];var n=$('.unprefixed [data-point="0"]').text();radius_x_pct=parseInt(n.replace("%",""));var s=$('.unprefixed [data-point="1"]').text();radius_y_pct=parseInt(s.replace("%",""));var p=$('.unprefixed [data-point="2"]').text().replace("%","").split(" ");parseInt(p[0]),parseInt(p[1])}}).on("dragMove",function(a,t,i){var o=a.position.x,n=a.position.y;if("radius_x"==e){var s=(s=Math.floor(Math.abs(start_pos_x-o)/width*100))+"%";$point.text(s)}if("radius_y"==e){var p=(p=Math.floor(Math.abs(start_pos_y-n)/height*100))+"%";$point.text(p)}if("position"==e){var d=start_x_px-o,r=start_y_px-n,c=start_radius_x_px[0]-d,l=start_radius_x_px[1]-r,h=start_radius_y_px[0]-d,g=start_radius_y_px[1]-r,u=o-radius_x_pct/100*width;radius_y_pct,height;if(c>width&&u>0)c=u;if(c>width)c=width;$radius_x.css({left:c+"px",top:l+"px"}),$radius_y.css({left:h+"px",top:g+"px"});s=Math.floor(o/width*100)+"%",p=Math.floor(n/height*100)+"%";$point.text(s+" "+p)}clipIt()}).on("dragEnd",function(a,t,i){$(".point").removeClass("changing")})}if("inset"==type)for(t=0,i=a.length;t<i;t++){var e;o=a[t];"left"!=(e=o.classList[1])&&"right"!=e||(n="x"),"top"!=e&&"bottom"!=e||(n="y");new Draggabilly(o,{containment:!0,grid:grid,axis:n}).on("dragStart",function(a,i,o){t=a.element.dataset.handle,"left"!=(e=a.element.classList[1])&&"right"!=e||(n="x"),"top"!=e&&"bottom"!=e||(n="y"),$point=$('[data-point="'+t+'"]'),$point.addClass("changing")}).on("dragMove",function(a,t,i){var o=a.position.x,s=a.position.y;if((o=(o/width*100).toFixed(0))<1)o=0;if(o>99)o=100;if((s=(s/height*100).toFixed(0))<1)s=0;if(s>99)s=100;if("right"==e)o=Math.abs(100-o);if("bottom"==e)s=Math.abs(100-s);var p=(p=$unprefixed.text().match(/inset(.*?)\)/g).toString()).replace("inset(","").replace(")","").replace(/%/g,"");if($unprefixed.attr("data-coords",p),0!==o)o=o+"%";if(0!==s)s=s+"%";"x"==n&&$point.text(o),"y"==n&&$point.text(s),setHandleBars(e),clipIt()}).on("dragEnd",function(a,t,i){$(".point").removeClass("changing")})}}function getRadius(a,t,i,o){return(Math.sqrt(Math.pow(a-t,2)+Math.pow(i-o,2))/width*100).toFixed(1)}function setPoint(a,t){if((a=(a/width*100).toFixed(0))<1)a=0;if(a>99)a=100;if((t=(t/height*100).toFixed(0))<1)t=0;if(t>99)t=100;if(0!==a)a=a+"%";if(0!==t)t=t+"%";$point.text(a+" "+t)}function clearDemo(){$html.removeClass("insetting"),$(".inset-round").val("5% 20% 0 10%"),$handles.empty(),$functions.empty()}function clipIt(){var a=$(".show.block").text();$clipboard.attr("style",a)}function handleReposition(a,t){$(".handle").each(function(){var i=parseInt($(this).css("left"))/a,o=parseInt($(this).css("top"))/t,n=i*width+"px",e=o*height+"px";$(this).css({left:n,top:e})})}function sizes(){var a=parseInt(width)+20,t=parseInt(height)+20;$demo_width.val(width),$demo_height.val(height),$box.css({width:a,height:t})}start_type="polygon",start_coords=start.coords,start_name=start.name,mobile_px_breakpoint=800,width=300,height=300,grid=[0,0],$(function(){sizes(),init(),$(window).resize(function(){handleReposition(width,height),sizes()}),$("#shadowboard-toggle").change(function(){$(this).is(":checked")?$(".shadowboard").css("opacity",".25"):$(".shadowboard").css("opacity","0"),scrollTop()}),$('input[type="number"]').change(function(){var a=width,t=height;if(width=$demo_width.val(),$(window).width()<800)var i=$(window).width()-42;else i=$(".demo-container").width()-42;width>i&&(width=i),width<100&&(width=100),height=$demo_height.val();height>800&&(height=800),height<100&&(height=100),handleReposition(a,t),$demo_width.val(width),$demo_height.val(height),sizes(),scrollTop()}),$(".inset-round").focus(function(){"5% 20% 0 10%"==$(this).val()&&$(this).val(""),$(this).blur(function(){var a=$(this).val();""!==a?$(".round-value").text(" round "+a):($(".round-value").text(""),$(this).val("5% 20% 0 10%")),clipIt()})}),$(".backgrounds img").mousedown(function(){setCustomBackground($(this).attr("src"))}),$("#custom_url").blur(function(){var a=$(this).val();""!==a&&setCustomBackground(a)})});